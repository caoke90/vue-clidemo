!function(){"use strict";var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,a=function(a){return Array.isArray(a)?a:Array.from(a)},b=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},c=window,d=document,e=void 0,f=void 0,g=function(a){return"_17m."+a},h=function(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"},i=function(){},j="_17m_external";h(c.vox,"Object")?c.vox.task||(c.vox.task={}):c.vox={task:{}},Object.defineProperty(c.vox,"_task",{value:{}}),k=c.vox,l=k.task,m=k._task,n=function(a,b){d.removeEventListener(a,b)},o=function(a,c,e){var f,h,j;a&&c&&(h=function(a){Array.isArray(a)?c.apply(void 0,b(a)):c(a)},"RANDOM"===e?f=function(a){h(a.detail),n(a.type,f)}:(j=function(b,c){void 0===m[a]&&(m[a]=b),m[a]===b&&h(c)},f=function(a){j("TRIGGER",a.detail),e&&n(a.type,f)},l[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];if(1===c.length)try{c=JSON.parse(c[0])}catch(f){c=c[0]}e&&l[a]===i,j("VOX",c)}),d.addEventListener(g(a),f))},p=function(c,d){var k,e=a(c),f=e[0],g=e[1],i=e.slice(2),j="ELSE";return h(f,"Object")?j="METHOD":h(g,"Object")?j="OBJ_PARAM":h(g,"Function")?j="FN_PARAM":(k=i[i.length-1],h(k,"Function")?g=[g].concat(b(i.slice(0,-1))):g&&(g=[g].concat(b(i))),i=k),d[j](f,g,i)},q=function(){try{return c.webkit.messageHandlers[j].postMessage,!0}catch(a){return!1}}(),q?(r=function(){return Math.random()*Date.now()},e=function(){var a,b,d,e,h,i,k,l,m;for(a=arguments.length,b=Array(a),d=0;a>d;d++)b[d]=arguments[d];return e=p(b,{METHOD:function(a){return a},OBJ_PARAM:function(a,b,c){return{method:a,param:b,cb:c[0]}},FN_PARAM:function(a,b){return{method:a,cb:b}},ELSE:function(a,b,c){return{method:a,param:b&&b.reduce(function(a,b,c){return a[c]=b,a},{}),cb:c}}}),h=e.method,i=e.param,k=e.cb,l=function(a){c.webkit.messageHandlers[j].postMessage({method:h,param:i,callback:a&&g(a)})},k?(m=r(),f(h,function(a){return a?(o(m,k,"RANDOM"),l(m),void 0):(k(null,"NO METHOD"),void 0)}),void 0):(l(),void 0)},s="methodExists",f=function(a,b){return a===s?(b(!0),void 0):(e(s,{name:a},function(a){b(a.exist)}),void 0)}):(t=[],u=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];t.push(b)},v=-1,w=void 0,x=function(){if(++v>10)u=function(a,b,c){c(null,"NO EXTERNAL")},clearInterval(w);else try{c.external.getInitParams(),clearInterval(w),u=function(a,d,e){var f,g;if(!(a in c.external))return e(null,"NO METHOD"),void 0;try{g=(f=c.external)[a].apply(f,b(d)),g&&(g=JSON.parse(g))}catch(h){}e(g)}}catch(a){return}t.forEach(function(a){u.apply(void 0,b(a))})},w=setInterval(x,66),x(),y=function(a){return a?[JSON.stringify(a)]:[]},e=function(){var a,b,c,d,e,f,g,h;for(a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];d=p(b,{METHOD:function(a){var b=a.method,c=a.param,d=a.cb;return{method:b,param:y(c),cb:d}},OBJ_PARAM:function(a,b,c){return{method:a,param:y(b),cb:c[0]}},FN_PARAM:function(a,b){return{method:a,param:[],cb:b}},ELSE:function(a,b,c){return{method:a,param:b||[],cb:c}}}),e=d.method,f=d.param,g=d.cb,h=void 0===g?i:g,u(e,f,h)},f=function(a,b){b(a in(c.external||{}))}),z={do_external:e,bind_trigger:o,check_external:f};for(A in z)z.hasOwnProperty(A)&&Object.defineProperty(c,A,{value:z[A]})}();